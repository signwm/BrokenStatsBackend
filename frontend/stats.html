<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Statystyki</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/style.css">
</head>
<body class="bg-dark text-light container py-3">
    <h1>Statystyki instancji</h1>
    <table id="statsTable" class="custom-dark-table"></table>
    <script>
    async function loadStats(){
        const res = await fetch('/api/instances/stats');
        const data = await res.json();
        const tbody = document.createElement('tbody');
        data.forEach(r=>{
            const diff = r.difficulty===2?'Ł':r.difficulty===1?'N':'T';
            const tr = document.createElement('tr');
            tr.innerHTML = `<td>${r.name}</td><td>${diff}</td><td>${r.count}</td>`+
                `<td>${r.avgTime}</td><td>${r.avgGold.toLocaleString()}</td>`+
                `<td>${r.avgExp.toLocaleString()}</td><td>${r.avgPsycho.toLocaleString()}</td>`+
                `<td>${r.avgProfit.toLocaleString()}</td>`;
            tbody.appendChild(tr);
        });
        const table = document.getElementById('statsTable');
        table.innerHTML = `<thead><tr><th>Instancja</th><th>Poziom</th><th>Ilość</th>`+
            `<th>Śr. czas</th><th>Śr. złoto</th><th>Śr. exp</th><th>Śr. psycho</th><th>Śr. zarobek</th></tr></thead>`;
        table.appendChild(tbody);
    }
    loadStats();
    </script>
</body>
</html>
